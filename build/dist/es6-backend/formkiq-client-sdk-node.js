!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.formkiqClient=t():e.formkiqClient=t()}(global,(function(){return(()=>{"use strict";var e={955:(e,t,n)=>{n.r(t),n.d(t,{FormkiqClient:()=>O});const r=require("@babel/runtime/helpers/classCallCheck");var i=n.n(r);const s=require("@babel/runtime/helpers/createClass");var o=n.n(s);const a=require("@babel/runtime/regenerator");var u=n.n(a);const c=require("@babel/runtime/helpers/asyncToGenerator");var l=n.n(c);const p=require("@babel/runtime/helpers/typeof");var h=n.n(p);const d=require("@babel/runtime/helpers/defineProperty");var f=n.n(d);const m=require("amazon-cognito-identity-js");var g=function(){function e(t,n,r){i()(this,e),f()(this,"storageClient",null),f()(this,"cognitoUserPool",null),f()(this,"username",""),f()(this,"accessToken",""),f()(this,"idToken",""),f()(this,"refreshToken",""),this.storageClient=r,this.buildUserPool(t,n)}var t;return o()(e,[{key:"username",get:function(){return this.username?this.username:(this.storageClient,null)}},{key:"cognitoUser",get:function(){return this.username?this.getCognitoUser(this.username):null}}]),o()(e,[{key:"buildUserPool",value:function(e,t){this.cognitoUserPool=new m.CognitoUserPool({UserPoolId:e,ClientId:t})}},{key:"getCognitoUser",value:function(e){var t={Username:e,Pool:this.cognitoUserPool};return new m.CognitoUser(t)}},{key:"refreshSession",value:function(){var e=this;return this.cognitoUserPool?this.username?(new m.CognitoRefreshToken({RefreshToken:this.refreshTokenValue}),void this.getCognitoUser(this.username).refreshSession(RefreshToken,(function(t,n){return t?{cognitoErrorCode:t.code,message:t.message}:(e.idToken=n.getIdToken().getJwtToken(),e.accessToken=n.getAccessToken().getJwtToken(),e.refreshToken=n.getRefreshToken().getToken(),{message:"Session has been refreshed."})}))):{message:"No Cognito User available for session refresh"}:{message:"No user pool assigned"}}},{key:"login",value:(t=l()(u().mark((function e(t,n){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(new Promise((function(e,i){r.cognitoUserPool||i({message:"No user pool assigned"});var s=new m.AuthenticationDetails({Username:t,Password:n}),o=r.getCognitoUser(t);o.authenticateUser(s,{onSuccess:function(n){r.username=t,r.idToken=n.getIdToken().getJwtToken(),r.accessToken=n.getAccessToken().getJwtToken(),r.refreshToken=n.getRefreshToken().getToken(),e({message:"Cognito User has been logged in."})},onFailure:function(t){"PasswordResetRequiredException"===t.code?o.forgotPassword({onSuccess:function(){e({message:"Cognito User has been sent an email with password reset instructions."})},onFailure:function(e){i({cognitoErrorCode:e.code,message:e.message})}}):i({cognitoErrorCode:t.code,message:t.message})},newPasswordRequired:function(){i({cognitoActionRequired:"newPasswordRequired",message:"Cognito User must change password."})}})}))));case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"register",value:function(e,t){if(!this.cognitoUserPool)return{message:"No user pool assigned"};var n={Name:"email",Value:e},r=[],i=new m.CognitoUserAttribute(n);r.push(i),this.cognitoUserPool.signUp(n.Value,t,r,null,(function(e,t){return e?{cognitoErrorCode:e.code,message:e.message}:{message:"Cognito User Account created. Email sent to Cognito User for confirmation."}}))}},{key:"confirmUser",value:function(e,t){if(!this.cognitoUserPool)return{message:"No user pool assigned"};new m.CognitoUser({Username:e,Pool:this.cognitoUserPool}).confirmRegistration(t,!1,(function(e,t){return e?{cognitoErrorCode:e.code,message:e.message}:{message:"Cognito User Account has been confirmed."}}))}},{key:"forgotPassword",value:function(e){if(!this.cognitoUserPool)return{message:"No user pool assigned"};new m.CognitoUser({Username:e,Pool:this.cognitoUserPool}).forgotPassword({onSuccess:function(){return{message:"Cognito User has been sent an email with password reset instructions."}},onFailure:function(e){return{cognitoErrorCode:e.code,message:e.message}}})}},{key:"changePassword",value:function(e,t,n){if(!this.cognitoUserPool)return{message:"No user pool assigned"};var r=new m.AuthenticationDetails({Username:e,Password:t}),i=new m.CognitoUser({Username:e,Pool:this.cognitoUserPool});i.authenticateUser(r,{onSuccess:function(){return!1},onFailure:function(e){return{cognitoErrorCode:e.code,message:"Current password for this Cognito User is incorrect."}},newPasswordRequired:function(e,t){i.completeNewPasswordChallenge(n,{},{onSuccess:function(){return{message:"Password has been changed for this Cognito User."}},onFailure:function(e){return{cognitoErrorCode:e.code,message:e.message}}})}})}},{key:"confirmPassword",value:function(e,t,n){if(!this.cognitoUserPool)return{message:"No user pool assigned"};new m.CognitoUser({Username:email,Pool:this.cognitoUserPool}).confirmPassword(t,n,{onSuccess:function(){return{message:"Password has been changed for this Cognito User."}},onFailure:function(e){return"ExpiredCodeException"===e.code?{cognitoErrorCode:e.code,message:"Verification Code has expired. A new reset password request needs to be made."}:(e.code,{cognitoErrorCode:e.code,message:e.message})}})}}]),e}(),v=function(){function e(t,n,r,s){i()(this,e),f()(this,"host","api-demo.tryformkiq.com"),f()(this,"storageClient",null),f()(this,"validDateRegExp",/^d{4}-d{2}-d{2}$/),f()(this,"validTZRegExp",/(([+-]?)(d{2}):?(d{0,2}))/),t&&(this.host=t),s&&s.storageClient&&(this.storageClient=s.storageClient),n&&r&&this.buildCognitoClient(n,r),e.instance||(e.instance=this)}var t,n;return o()(e,[{key:"instance",get:function(){return e.instance},set:function(t){e.instance=t}}]),o()(e,[{key:"logout",value:function(){this.cognitoClient=null}},{key:"buildCognitoClient",value:function(e,t){this.cognitoClient=new g(e,t,this.storageClient)}},{key:"buildQueryString",value:function(e){var t=Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])}));return t.length?"?"+t.join("&"):""}},{key:"buildOptions",value:function(e,t,n,r){var i={method:e};return n||(n={}),!r&&this.cognitoClient&&this.cognitoClient.idToken&&(n.Authorization=this.cognitoClient.idToken),t&&("string"==typeof t?i.body=t:"object"===h()(t)&&(i.body=JSON.stringify(t))),i.headers=n,i}},{key:"fetchAndRespond",value:(n=l()(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(new Promise((function(e){fetch(t,n).then((function(e){return e.json()})).then((function(t){r=t,e()}))})));case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"uploadFile",value:(t=l()(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(new Promise((function(e){var i=new XMLHttpRequest;i.open("PUT",t,!0),i.setRequestHeader("Content-Type",n.type),i.onreadystatechange=function(){r=200==this.status?{message:"File uploaded successfully"}:{message:"An unexpected error has occurred"},e()},i.send(n)})));case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),b=function(){function e(){i()(this,e),this.initializeStorage(),e.instance||(e.instance=this)}return o()(e,[{key:"instance",get:function(){return e.instance},set:function(t){e.instance=t}}]),o()(e,[{key:"initializeStorage",value:function(){"undefined"!=typeof localStorage&&null!==localStorage||new(0,n(407).LocalStorage)("./scratch")}},{key:"getItem",value:function(e){return localStorage.getItem(e)}},{key:"setItem",value:function(e,t){}},{key:"getJson",value:function(e){}},{key:"setJson",value:function(e,t){}}]),e}(),C=function(){function e(t){i()(this,e),this.apiClient=t||v.instance,e.instance||(e.instance=this)}var t,n,r,s,a,c,p,h,d,f,m,g,b,C,w;return o()(e,[{key:"getDocuments",value:(w=l()(u().mark((function e(t,n,r,i,s,o){var a,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t="default"),(a={}).siteId=t,n&&n.match(this.apiClient.validDateRegExp)&&(a.date=n,r&&r.match(this.apiClient.validTZRegExp)&&(a.tz=r)),i&&i.length&&(a.previous=i),s&&s.length&&(a.next=s),o&&(a.limit=o),c="https://".concat(this.apiClient.host,"/documents").concat(this.apiClient.buildQueryString(a)),l=this.apiClient.buildOptions("GET"),e.next=11,this.apiClient.fetchAndRespond(c,l);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i,s){return w.apply(this,arguments)})},{key:"getDocument",value:(C=l()(u().mark((function e(t,n){var r,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:return n||(n="default"),(r={}).siteId=n,i="https://".concat(this.apiClient.host,"/documents/").concat(t).concat(this.apiClient.buildQueryString(r)),s=this.apiClient.buildOptions("GET"),e.next=9,this.apiClient.fetchAndRespond(i,s);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return C.apply(this,arguments)})},{key:"addDocument",value:(b=l()(u().mark((function e(t,n){var r,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||(n="default"),(r={}).siteId=n,i="https://".concat(this.apiClient.host,"/documents").concat(this.apiClient.buildQueryString(r)),s=this.apiClient.buildOptions("POST",t),e.next=7,this.apiClient.fetchAndRespond(i,s);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"addDocumentUsingPublicPath",value:(g=l()(u().mark((function e(t,n){var r,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||(n="default"),(r={}).siteId=n,i="https://".concat(this.apiClient.host,"/public/documents").concat(this.apiClient.buildQueryString(r)),s=this.apiClient.buildOptions("POST",t),e.next=7,this.apiClient.fetchAndRespond(i,s);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"updateDocument",value:(m=l()(u().mark((function e(t,n,r){var i,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:return r||(r="default"),(i={}).siteId=r,s="https://".concat(this.apiClient.host,"/documents/").concat(t).concat(this.apiClient.buildQueryString(i)),o=this.apiClient.buildOptions("PATCH",n),e.next=9,this.apiClient.fetchAndRespond(s,o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return m.apply(this,arguments)})},{key:"deleteDocument",value:(f=l()(u().mark((function e(t,n){var r,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:return n||(n="default"),(r={}).siteId=n,i="https://".concat(this.apiClient.host,"/documents/").concat(t).concat(this.apiClient.buildQueryString(r)),s=this.apiClient.buildOptions("DELETE"),e.next=9,this.apiClient.fetchAndRespond(i,s);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"getDocumentTags",value:(d=l()(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:return n="https://".concat(this.apiClient.host,"/documents/").concat(t,"/tags"),r=this.apiClient.buildOptions("GET"),e.next=6,this.apiClient.fetchAndRespond(n,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getDocumentTag",value:(h=l()(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:if(n){e.next=4;break}return e.abrupt("return",JSON.stringify({message:"No tag key specified"}));case 4:return r="https://".concat(this.apiClient.host,"/documents/").concat(t,"/tags/").concat(n),i=this.apiClient.buildOptions("GET"),e.next=8,this.apiClient.fetchAndRespond(r,i);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"addDocumentTag",value:(p=l()(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:return r="https://".concat(this.apiClient.host,"/documents/").concat(t,"/tags"),i=this.apiClient.buildOptions("POST",n),e.next=6,this.apiClient.fetchAndRespond(r,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"deleteDocumentTag",value:(c=l()(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:if(n){e.next=4;break}return e.abrupt("return",JSON.stringify({message:"No tag key specified"}));case 4:return r="https://".concat(this.apiClient.host,"/documents/").concat(t,"/tags/").concat(n),i=this.apiClient.buildOptions("DELETE"),e.next=8,this.apiClient.fetchAndRespond(r,i);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"getDocumentUrl",value:(a=l()(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:return n="https://".concat(this.apiClient.host,"/documents/").concat(t,"/url"),r=this.apiClient.buildOptions("GET"),e.next=6,this.apiClient.fetchAndRespond(n,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"convertDocumentToFormat",value:(s=l()(u().mark((function e(t,n,r){var i,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:return i={mime:n},r&&(i.versionId=r),s="https://".concat(this.apiClient.host,"/documents/").concat(t,"/formats"),o=this.apiClient.buildOptions("POST",i),e.next=8,this.apiClient.fetchAndRespond(s,o);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return s.apply(this,arguments)})},{key:"getDocumentVersions",value:(r=l()(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:return n="https://".concat(this.apiClient.host,"/documents/").concat(t,"/versions"),r=this.apiClient.buildOptions("GET"),e.next=6,this.apiClient.fetchAndRespond(n,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getSignedUrlForNewDocumentUpload",value:(n=l()(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t&&(n.path=t),r="https://".concat(this.apiClient.host,"/documents/upload").concat(this.apiClient.buildQueryString(n)),i=this.apiClient.buildOptions("GET"),e.next=6,this.apiClient.fetchAndRespond(r,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getSignedUrlForDocumentReplacementUpload",value:(t=l()(u().mark((function e(t,n){var r,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No document ID specified"}));case 2:return r={},n&&(r.path=n),i="https://".concat(this.apiClient.host,"/documents/").concat(t,"/upload").concat(this.apiClient.buildQueryString(r)),s=this.apiClient.buildOptions("GET"),e.next=8,this.apiClient.fetchAndRespond(i,s);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"buildDocumentParametersForAddOrUpdate",value:function(e,t,n,r){return new y(e,t,n,r)}},{key:"buildDocumentTagParametersForAdd",value:function(e,t){return new k(e,t)}},{key:"instance",get:function(){return e.instance},set:function(t){e.instance=t}}]),e}(),y=function(){function e(t,n,r,s){i()(this,e),f()(this,"documents",[]),t&&(this.content=btoa(t)),n&&(this.contentType=n),r&&(this.path=r),s&&(this.tags=s)}return o()(e,[{key:"addChildDocument",value:function(t,n,r,i){var s=new e(t,n,r,i);this.documents.push(s)}},{key:"addAttachment",value:function(t){var n=new e(null,null,null,t);this.documents.push(n)}}]),e}(),k=function e(t,n){i()(this,e),t&&(this.key=t),n&&(this.value=n)},w=function(){function e(t,n){i()(this,e),this.apiClient=t||v.instance,this.documentsApi=n||C.instance}var t,n;return o()(e,[{key:"checkWebFormsInDocument",value:function(){var e=this;Array.from(document.getElementsByTagName("FORM")).filter((function(e){return e.classList.contains("fkq-form")})).forEach((function(t){t.setAttribute("action","JavaScript://"),t.onsubmit=function(t){e.submitFormkiqForm(t.target)}}))}},{key:"submitFormkiqForm",value:(n=l()(u().mark((function e(t){var n,r,i,s,o,a,c=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={}).attachmentFields=[],n.formFields=[],t.getAttribute("name")&&(n.formName=t.getAttribute("name")),r=n.formName?n.formName:"Unknown Form",onFormSubmitted&&onFormSubmitted(r),t.querySelectorAll("input, select, textarea").forEach((function(e){var t;switch(e.tagName){case"INPUT":switch(e.type){case"button":case"reset":case"submit":break;case"checkbox":case"radio":var r="";e.getAttribute("name")&&(r=e.getAttribute("name"));var i=-1;if(r&&n.formFields.length){var s=n.formFields.filter((function(e){return e.fieldName===r}));s.length&&(i=n.formFields.indexOf(s[0]))}-1===i?(t={},r&&(t.fieldName=r),"checkbox"===e.type?(t.values=[],e.checked&&t.values.push(e.value)):e.checked&&(t.value=e.value),n.formFields.push(t)):e.checked&&("checkbox"===e.type?n.formFields[i].values.push(e.value):n.formFields[i].value=e.value);break;case"file":var o={};e.getAttribute("name")&&(o.fieldName=e.getAttribute("name")),e.value.length?o.hasFile=!0:o.hasFile=!1,n.attachmentFields.push(o);break;default:t={},e.getAttribute("name")&&(t.fieldName=e.getAttribute("name")),t.value=e.value,n.formFields.push(t)}break;case"SELECT":if(t={},e.getAttribute("name")&&(t.fieldName=e.getAttribute("name")),e.multiple){var a=Array.from(e.options);t.values=a.filter((function(e){return e.selected})).map((function(e){return e.value}))}else t.value=e.options[e.selectedIndex].value;n.formFields.push(t);break;case"TEXTAREA":t={},e.getAttribute("name")&&(t.fieldName=e.getAttribute("name")),t.value=e.value,n.formFields.push(t)}})),i=JSON.stringify(n),s=this.documentsApi.buildDocumentParametersForAddOrUpdate(i),(o=Array.from(t.getElementsByTagName("INPUT")).filter((function(e){return"file"===e.type}))).forEach((function(e){e.value&&s.addAttachment([c.documentsApi.buildDocumentTagParametersForAdd("fieldName",e.getAttribute("name"))])})),e.next=14,this.sendFormRequests(s,o);case 14:a=e.sent,onFormCompleted?onFormCompleted(r,a):(console.log("no onFormCompleted function found for ${formNameForCallbacks}. Response below:"),console.log(a));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"sendFormRequests",value:(t=l()(u().mark((function e(t,n){var r,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,Promise.resolve(new Promise((function(e){i.documentsApi.addDocumentUsingPublicPath(t).then((function(t){if(t.documentId)if(t.documents){var s=[];t.documents.filter((function(e){return e.uploadUrl})).forEach((function(e,t){var r=n[t];if(r&&r.value){var o=r.files[0];s.push(new Promise((function(t){i.apiClient.uploadFile(e.uploadUrl,o).then((function(e){t()}))})))}})),s.length?Promise.all(s).then((function(){r.success=!0,r.message="Form has been submitted and received, along with ".concat(s.length," attachments."),e()})):(r.success=!0,r.message="Form has been submitted and received, but not all attachments were received successfully.",e())}else r.success=!0,r.message="Form has been submitted and received.",e();else r.success=!1,r.message="Form failed to be processed successfully. Please try again later.",e()}))})));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),x=function(){function e(t){i()(this,e),this.apiClient=t||v.instance}var t,n,r,s,a,c;return o()(e,[{key:"getPresets",value:(c=l()(u().mark((function e(t,n,r,i){var s,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t="default"),(s={}).siteId=t,n&&n.length&&(s.previous=n),r&&r.length&&(s.next=r),i&&(s.limit=i),o="https://".concat(this.apiClient.host,"/presets").concat(this.apiClient.buildQueryString(s)),a=this.apiClient.buildOptions("GET"),e.next=10,this.apiClient.fetchAndRespond(o,a);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return c.apply(this,arguments)})},{key:"addPreset",value:(a=l()(u().mark((function e(t,n){var r,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||(n="default"),(r={}).siteId=n,i="https://".concat(this.apiClient.host,"/presets").concat(this.apiClient.buildQueryString(r)),s=this.apiClient.buildOptions("POST",t),e.next=7,this.apiClient.fetchAndRespond(i,s);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"deletePreset",value:(s=l()(u().mark((function e(t,n){var r,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No preset ID specified"}));case 2:return n||(n="default"),(r={}).siteId=n,i="https://".concat(this.apiClient.host,"/presets/").concat(t).concat(this.apiClient.buildQueryString(r)),s=this.apiClient.buildOptions("DELETE"),e.next=9,this.apiClient.fetchAndRespond(i,s);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"getPresetTags",value:(r=l()(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No preset ID specified"}));case 2:return n="https://".concat(this.apiClient.host,"/presets/").concat(t,"/tags"),r=this.apiClient.buildOptions("GET"),e.next=6,this.apiClient.fetchAndRespond(n,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"addPresetTag",value:(n=l()(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No preset ID specified"}));case 2:return r="https://".concat(this.apiClient.host,"/presets/").concat(t,"/tags"),i=this.apiClient.buildOptions("POST",n),e.next=6,this.apiClient.fetchAndRespond(r,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"deletePresetTag",value:(t=l()(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",JSON.stringify({message:"No preset ID specified"}));case 2:if(n){e.next=4;break}return e.abrupt("return",JSON.stringify({message:"No tag key specified"}));case 4:return r="https://".concat(this.apiClient.host,"/presets/").concat(t,"/tags/").concat(n),i=this.apiClient.buildOptions("DELETE"),e.next=8,this.apiClient.fetchAndRespond(r,i);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"buildPresetParametersForAdd",value:function(e,t){return new P(e,t)}},{key:"buildPresetTagParametersForAdd",value:function(e,t){return new T(e,t)}}]),e}(),P=function e(t,n){i()(this,e),t&&(this.name=t),n&&(this.tags=n)},T=function e(t,n){i()(this,e),t&&(this.key=t),n&&(this.value=n)},A=function(){function e(t){i()(this,e),this.apiClient=t||v.instance}var t;return o()(e,[{key:"search",value:(t=l()(u().mark((function e(t,n,r,i,s){var o,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||(n="default"),(o={}).siteId=n,r&&r.length&&(o.previous=r),i&&i.length&&(o.next=i),s&&(o.limit=s),a="https://".concat(this.apiClient.host,"/search").concat(this.apiClient.buildQueryString(o)),c=this.apiClient.buildOptions("POST",t),e.next=10,this.apiClient.fetchAndRespond(a,c);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i,s){return t.apply(this,arguments)})},{key:"buildTagSearchParameters",value:function(e,t,n){return new S(e,t,n)}}]),e}(),S=function e(t,n,r){i()(this,e);var s={tag:{}};t&&(s.tag.key=t),n?s.tag.beginsWith=n:r&&(s.tag.eq=r),this.query=s},U=function(){function e(t){i()(this,e),this.apiClient=t||v.instance}var t;return o()(e,[{key:"getSites",value:(t=l()(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t="default"),(n={}).siteId=t,r="https://".concat(this.apiClient.host,"/sites").concat(this.apiClient.buildQueryString(n)),i=this.apiClient.buildOptions("GET"),e.next=7,this.apiClient.fetchAndRespond(r,i);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),N=function(){function e(t){i()(this,e),this.apiClient=t||v.instance}var t;return o()(e,[{key:"getVersion",value:(t=l()(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://".concat(this.apiClient.host,"/version"),n=this.apiClient.buildOptions("GET"),e.next=4,this.apiClient.fetchAndRespond(t,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),O=function(){function e(t,n,r,s){i()(this,e),this.storageClient=new b;var o={};s&&s.useStorageForCognito&&(o.storageClient=this.storageClient),this.apiClient=new v(t,n,r,o),this.documentsApi=new C,this.presetsApi=new x,this.searchApi=new A,this.sitesApi=new U,this.versionApi=new N,"undefined"!=typeof document&&null!==document&&(this.webFormsHandler=new w,this.webFormsHandler.checkWebFormsInDocument())}return o()(e,[{key:"login",value:function(e,t){return this.apiClient.cognitoClient?this.apiClient.cognitoClient.login(e,t):{message:"No authentication client (e.g., Cognito) has been initialized."}}},{key:"logout",value:function(){return this.apiClient.logout()}}]),e}()},407:e=>{e.exports=require("node-localstorage")}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(955)})()}));